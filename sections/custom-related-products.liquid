<div class="related">
  <div class="width">
    <h2>You may like:</h2>
    <div class="related-product"></div>
  </div>
</div>
{% if cart.item_count > 0 %}
  {% assign relatedid = cart.items[0].product_id %}
{% else %}
  {% assign relatedid = 48903798325526 %}
{% endif %}

<script>
function buildblock(product){
 const html = `<a class="related-product" href='${product.url}'>
 <img src='${product.images[0]}' />
 <h3>${product.title}</h3>
 <span>${product.price}</span>
 </a>
 `
  return html
}
  
    fetch(window.Shopify.routes.root + "recommendations/products.json?product_id={{relatedid}}&limit=3")
    .then(response => response.json())
    .then(({ products }) => {
        products.foreach(product=>{
          const html = buildblock(product)
          document.queryselector(.related-product)
          
        })
    }
  );
</script>
{% schema %}
{
  "name": "custom-related-products",
  "settings": [],
   "presets": [
    {
      "name": "custom-related-products"
    }
  ]
}
{% endschema %}
