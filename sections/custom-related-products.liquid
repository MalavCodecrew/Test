<div class="related">
  <div class="width">
    <h2>Recommendations</h2>

    <div class="related-products"></div>
  </div>
</div>

{% if cart.item_count > 0 %}
  {% assign relatedId = cart.items[0].product_id %}
{% else %}
  {% assign relatedId = 48903798325526 %}
{% endif %}

<script>
function buildBlock(product) {
 
  const html = `
    <a class="related-products" href="${product.url}">
      <img src="${product.images[0]}" />
      <h3>${product.title}</h3>
      <span>${product.price}</span>
    </a>
  `

  return html
}

fetch(window.Shopify.routes.root + "recommendations/products.json?product_id={{ relatedId }}&limit=3")
  .then(response => response.json())
  .then(({ products }) => {
    products.forEach(product => {
      const html = buildBlock(product)
      document.querySelector('.related-products').innerHTML += html
    })
  }
);
</script>
{% schema %}
{
  "name": "custom-related-products",
  "settings": [],
   "presets": [
    {
      "name": "custom-related-products"
    }
  ]
}
{% endschema %}
