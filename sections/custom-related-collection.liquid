<div class="related-collection">
  <div class="width-collection">
    <h2>Related Collections</h2>
    <div class="related-collection" id="custom-collection"></div>
  </div>
</div>

<script>

function buildBlock2(collection) {
  const html = `
    <a class="related-collection-item" href="${collection.url}" id="custom-collection2">
      <img src="${collection.image ? collection.image.src : 'default-image-url.jpg'}" alt="${collection.title}" />
      <h3>${collection.title}</h3>
    </a>
  `;
  return html;
}

fetch(`${window.Shopify.routes.root}collections.json`)
  .then(response => response.json())
  .then(data => {
    data.collections.forEach(collection => {
      const html = buildBlock2(collection);
      document.querySelector('.related-collections').innerHTML += html;
    });
  })
  .catch(error => console.error('Error fetching collections:', error));
</script>

{% schema %}
{
  "name": "Custom-related-collection",
  "settings": [],
   "presets": [
  {
    "name": "custom-related-collection"
  }]
}
{% endschema %}
